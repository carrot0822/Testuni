(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/option/option"],{"0dae":function(t,e,o){"use strict";(function(t,o){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={data:function(){return{tabInd:0,statusBarHeight:0,bodyHeight:0,state:"",isLocked:!0,storeroomArray:[],storeroomIndex:0,storeroomNum:0,storerooms:[],regions:[],regionArray:[],regionIndex:0,regionNum:0,cols:[],colIndex:0,direction:"",curState:"",isMove:!1,hjz:{wd:0,sd:0,co2:0,ch20:0,pm10:0,pm25:0,tvoc:0},timeer:null}},watch:{storeroomNum:function(e,o){t.setStorage({key:"fkStoredId",data:e,success:function(){}})}},onLoad:function(){this.statusBarHeight=t.getSystemInfoSync()["statusBarHeight"],this.bodyHeight=t.getSystemInfoSync()["windowHeight"]-this.statusBarHeight-48;var e=t.getStorageSync("regionIndex");e?(o("log",e,"值存在的话"," at pages\\option\\option.vue:270"),this.regionIndex=e):t.setStorageSync("regionIndex",0);var n=t.getStorageSync("colIndex");n?this.colIndex=n:t.setStorageSync("colIndex",0)},onShow:function(){clearInterval(this.timeer),this.timeer=null,this.selectStoreRoom(),o("log","调试定时器"," at pages\\option\\option.vue:292"),this.colIndex=t.getStorageSync("colIndex"),this.regionIndex=t.getStorageSync("regionIndex")},onHide:function(){o("log",this.timeer,"编译器"," at pages\\option\\option.vue:298"),clearInterval(this.timeer),this.timeer=null,o("log",this.timeer,"定时器没关掉吗"," at pages\\option\\option.vue:301")},methods:{onPageJump:function(){t.navigateTo({url:"../search/search"})},scrollL:function(e){var o=this,n=e.detail.scrollLeft,a=t.createSelectorQuery().in(this);a.select(".temp_shelf .item_box").boundingClientRect(function(t){var e=Math.floor(n/(3*t.width));o.tabInd=e}).exec()},upper:function(t){this.tabInd=0},lower:function(t){this.tabInd=1},selectStoreRoom:function(){var t=this;t.submitAjax("environmentmodule/wkStoTbStore/selectWkStoTbStore",null,"GET",function(e){t.storeroomArray=[],t.storerooms=e.data.rows;var o=!0,n=!1,a=void 0;try{for(var r,i=e.data.rows[Symbol.iterator]();!(o=(r=i.next()).done);o=!0){var s=r.value;t.storeroomArray.push(s.storeName)}}catch(u){n=!0,a=u}finally{try{o||null==i.return||i.return()}finally{if(n)throw a}}t.storeroomNum=e.data.rows[0].id,t.selectRegion(t.storeroomNum)})},storeroomChange:function(e){var o=this;o.storeroomNum=o.storerooms[e.target.value].id,o.storeroomIndex=e.target.value,this.colIndex=0,this.regionIndex=0,t.setStorageSync("regionIndex",0),t.setStorageSync("colIndex",0),o.selectRegion(o.storeroomNum)},selectRegion:function(t){var e=this;clearInterval(this.timeer),this.timeer=null,o("log","只打开一个定时器",this.timeer," at pages\\option\\option.vue:353"),e.submitAjax("storeroommodule/stoTbRegion/selectByBind?fkStoreId="+t,null,"GET",function(t){e.regionArray=[],e.regions=t.data.rows;var n=!0,a=!1,r=void 0;try{for(var i,s=e.regions[Symbol.iterator]();!(n=(i=s.next()).done);n=!0){var u=i.value;e.regionArray.push(u.regionName)}}catch(l){a=!0,r=l}finally{try{n||null==s.return||s.return()}finally{if(a)throw r}}e.regionNum=t.data.rows[0].regionNum,e.getCols(e.regionNum),e.timeer=setInterval(function(){e.timingGetState(),o("log","定时器没关上吗"," at pages\\option\\option.vue:365")},3e3)})},regionChange:function(e){var n=this;n.regionNum=n.regions[e.target.value].regionNum,n.regionIndex=e.target.value,t.setStorage({key:"regionIndex",data:e.target.value,success:function(){o("log","success 存储区号",e.target.value," at pages\\option\\option.vue:377")}}),n.getCols(n.regionNum)},getCols:function(t){var e=this;e.cols=[];var o={},n=!0,a=!1,r=void 0;try{for(var i,s=e.regions[Symbol.iterator]();!(n=(i=s.next()).done);n=!0){var u=i.value;if(u.regionNum==t){o=u;break}}}catch(c){a=!0,r=c}finally{try{n||null==s.return||s.return()}finally{if(a)throw r}}for(var l=1;l<=o.cols;l++){if(("left"==o.gdlType||"right"==o.gdlType)&&l==o.cols)break;e.cols.push(l)}e.colNum=e.cols[0]},colChange:function(e){var n=this;n.colNum=n.cols[e.target.value],n.colIndex=e.target.value,t.setStorage({key:"colIndex",data:e.target.value,success:function(){o("log","success 存储列号",e.target.value," at pages\\option\\option.vue:411")}})},timingGetState:function(){var t=this,e=t.regionNum;t.submitAjax(t.$mjjUrl+"denseShelves/getstates?quNum="+e,null,"POST",function(e){if(e.data.state&&e.data.row){var o=JSON.parse(e.data.row);t.state=o.message,"禁止"!=t.state&&"锁定"!=t.state&&"到位"!=t.state&&"机械锁定"!=t.state&&"停止"!=t.state||(t.isMove=!1),"正在右移中"!=t.state&&"正在左移中"!=t.state||(t.isMove=!0)}}),t.getGethumiture(e)},getGethumiture:function(t){var e=this;e.submitAjax(e.$mjjUrl+"countmodule/storeAndRegionCount/getNewHumiture?quNum="+t,null,"POST",function(t){if(t.data.state&&t.data.row){var o=t.data.row;e.hjz.wd=o.wd.toFixed(1)?o.wd.toFixed(1):0,e.hjz.sd=o.sd.toFixed(1)?o.sd.toFixed(1):0,e.hjz.tvoc=o.tvoc.toFixed(1)?o.tvoc.toFixed(1):0,e.hjz.co2=o.co2.toFixed(1)?o.co2.toFixed(1):0,e.hjz.ch20=o.ch20.toFixed(1)?o.ch20.toFixed(1):0,e.hjz.pm10=o.pm10.toFixed(1)?o.pm10.toFixed(1):0,e.hjz.pm25=o.pm25.toFixed(1)?o.pm25.toFixed(1):0}})},locked:function(){var e=this,o=e.regionNum;e.isLocked?e.submitAjax(e.$mjjUrl+"denseShelves/Unlock?quNum="+o,null,"POST",function(o){if(o.data.state&&o.data.row){JSON.parse(o.data.row);e.isLocked=!1}else t.showToast({title:o.data.msg,icon:"none"})}):e.submitAjax(e.$mjjUrl+"denseShelves/locking?quNum="+o,null,"POST",function(o){if(o.data.state&&o.data.row){JSON.parse(o.data.row);e.isLocked=!0}else t.showToast({title:o.data.msg,icon:"none"})})},opTask:function(){var e=this;e.submitAjax(e.$mjjUrl+"denseShelves/openshelf?quNum="+e.regionNum,null,"POST",function(e){e.data.state&&e.data.row||t.showToast({title:e.data.msg,icon:"none"})})},closeTask:function(){var e=this;e.submitAjax(e.$mjjUrl+"denseShelves/merge?quNum="+e.regionNum,null,"POST",function(e){e.data.state&&e.data.row||t.showToast({title:e.data.msg,icon:"none"})})},ventilation:function(){var e=this;e.submitAjax(e.$mjjUrl+"denseShelves/aeration?quNum="+e.regionNum,null,"POST",function(e){e.data.state&&e.data.row||t.showToast({title:e.data.msg,icon:"none"})})},left:function(){var e=this;e.submitAjax(e.$mjjUrl+"denseShelves/leftmove?quNum="+e.regionNum+"&column="+e.colNum,null,"POST",function(e){e.data.state&&e.data.row||t.showToast({title:e.data.msg,icon:"none"})})},stop:function(){var e=this;e.isMove=!1,e.submitAjax(e.$mjjUrl+"denseShelves/stop?quNum="+e.regionNum,null,"POST",function(e){e.data.state&&e.data.row||t.showToast({title:e.data.msg,icon:"none"})})},right:function(){var e=this;e.submitAjax(e.$mjjUrl+"denseShelves/rightmove?quNum="+e.regionNum+"&column="+e.colNum,null,"POST",function(e){e.data.state&&e.data.row||t.showToast({title:e.data.msg})})}}};e.default=n}).call(this,o("6e42")["default"],o("0de9")["default"])},2400:function(t,e,o){"use strict";o.r(e);var n=o("0dae"),a=o.n(n);for(var r in n)"default"!==r&&function(t){o.d(e,t,function(){return n[t]})}(r);e["default"]=a.a},"784b":function(t,e,o){"use strict";var n,a=function(){var t=this,e=t.$createElement;t._self._c},r=[];o.d(e,"b",function(){return a}),o.d(e,"c",function(){return r}),o.d(e,"a",function(){return n})},"8abe":function(t,e,o){"use strict";(function(t){o("d8c2"),o("921b");n(o("66fd"));var e=n(o("f7c9"));function n(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,o("6e42")["createPage"])},b4de:function(t,e,o){"use strict";var n=o("dfbf"),a=o.n(n);a.a},dfbf:function(t,e,o){},f7c9:function(t,e,o){"use strict";o.r(e);var n=o("784b"),a=o("2400");for(var r in a)"default"!==r&&function(t){o.d(e,t,function(){return a[t]})}(r);o("b4de");var i,s=o("f0c5"),u=Object(s["a"])(a["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],i);e["default"]=u.exports}},[["8abe","common/runtime","common/vendor"]]]);